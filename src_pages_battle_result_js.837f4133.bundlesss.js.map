{"version":3,"file":"src_pages_battle_result_js.837f4133.bundlesss.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;AAGA;AACA;AAAA;AAAA;AAAA;;AACA;AAAA;AAAA;AAAA;;AACA;AAAA;AAAA;AAAA;;AACA;AAAA;AAAA;AAAA;;;AAGA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;;AACA;AAAA;AAAA;;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AADA;AAAA;AAAA;AAAA;;AAGA;AAHA;;AAAA;AAMA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAoBA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;AADA;AAAA;AAAA;AAAA;;AAGA;AAHA;;AAAA;AAMA;AAGA;AACA;AACA;AACA;AAGA;AACA;AACA;;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAmBA;AACA;AACA;;AAEA;AACA;AAAA;AACA;AAAA;AAEA;AAAA;AAMA;AAAA;AAAA;AAEA;AAAA;AAGA;AAAA;AAIA;AAAA;AAIA;AAAA;AAIA;AAAA;AAIA;AAAA;AAKA;AAAA;AAMA;AAAA;AAAA;AAEA;AAAA;AACA;AAAA;AAIA;AAAA;AAIA;AAAA;AAIA;AAAA;AAIA;AAAA;AAKA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAnEA;AA8EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;AAhLA","sources":["webpack://zlf/./src/pages/battle/result.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Loading from \"_src/compontent/loading\";\nimport style from \"./battle.css\";\n// import load from '../index.css';\n\nexport default () => {\n  const [oneInfos, setOneInfos] = useState({});\n  const [loadingOne, setOneloading] = useState(false);\n  const [loadingTwo, setTwoloading] = useState(false);\n  const [twoInfos, setTwoInfos] = useState({});\n\n  // 把URL的参数解析为对象\n  const parseUri = (uri) => {\n    const params = {};\n    try {\n      const para = uri.split(\"?\")[1];\n      const arrPara = para.split(\"&\");\n      const n = arrPara.length;\n      for (let i = 0; i < n; i += 1) {\n        const arr = arrPara[i].split(\"=\");\n        const [a, b] = arr;\n        params[a] = b;\n      }\n      return params;\n    } catch (error) {\n      window.location.href = \"#/battle\";\n    }\n    return params;\n  };\n\n  const getInfo = async () => {\n    const params = parseUri(window.location.hash);\n    if (!params.playerOne || !params.playerTwo) {\n      window.location.href = \"#/battle\";\n      return;\n    }\n    axios\n      .get(`https://api.github.com/users/${params.playerOne}`)\n      .then((res) => {\n        setOneInfos(res.data);\n        setOneloading(true);\n      });\n    axios\n      .get(`https://api.github.com/users/${params.playerTwo}`)\n      .then((res) => {\n        setTwoInfos(res.data);\n        setTwoloading(true);\n      });\n  };\n\n  useEffect(() => {\n    getInfo();\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener(\"hashchange\", getInfo);\n    return window.removeEventListener(\"hashchange\", getInfo);\n  }, []);\n\n  useEffect(async () => {\n    const params = parseUri(window.location.hash);\n    if (!params.playerOne || !params.playerTwo) {\n      window.location.href = \"#/battle\";\n      return;\n    }\n    axios\n      .get(`https://api.github.com/users/${params.playerOne}`)\n      .then((res) => {\n        setOneInfos(res.data);\n        setOneloading(true);\n      });\n    axios\n      .get(`https://api.github.com/users/${params.playerTwo}`)\n      .then((res) => {\n        setTwoInfos(res.data);\n        setTwoloading(true);\n      });\n  }, []);\n  const reset = () => {\n    window.location.href = \"#/battle\";\n  };\n\n  return loadingOne && loadingTwo ? (\n    <div className={`${style[\"result-result\"]}`}>\n      <div className={`${style[\"result-center\"]}`}>\n        <div>\n          <div className={`${style[\"result-info\"]}`}>\n            {oneInfos.public_repos > twoInfos.public_repos ? \"Winner\" : null}\n            {oneInfos.public_repos === twoInfos.public_repos ? \"Draw\" : null}\n            {oneInfos.public_repos < twoInfos.public_repos ? \"Loser\" : null}\n          </div>\n          <div>\n            <img src={oneInfos.avatar_url} alt=\"\" />\n          </div>\n          <div className={`${style.center} ${style.score}`}>\n            Scores: {oneInfos.public_repos}\n          </div>\n          <div className={`${style.center} ${style[\"result-name\"]}`}>\n            {oneInfos.name}\n          </div>\n          <div>\n            <i className=\"fa fa-location-arrow\" />\n            {oneInfos.location}\n          </div>\n          <div>\n            <i className=\"fa fa-group\" />\n            {oneInfos.followers}\n          </div>\n          <div>\n            <i className=\"fa fa-user-plus\" />\n            {oneInfos.following}\n          </div>\n          <div>\n            <i className=\"fa fa-code\" />\n            {oneInfos.public_repos}\n          </div>\n        </div>\n        <div>\n          <div className={`${style[\"result-info\"]}`}>\n            {twoInfos.public_repos > oneInfos.public_repos ? \"Winner\" : null}\n            {twoInfos.public_repos === oneInfos.public_repos ? \"Draw\" : null}\n            {twoInfos.public_repos < oneInfos.public_repos ? \"Loser\" : null}\n          </div>\n          <div>\n            <img src={twoInfos.avatar_url} alt=\"\" />\n          </div>\n          <div className={style.center}>Scores: {twoInfos.public_repos}</div>\n          <div className={`${style.center} ${style[\"result-name\"]}`}>\n            {twoInfos.name}\n          </div>\n          <div>\n            <i className=\"fa fa-location-arrow\" />\n            {twoInfos.location}\n          </div>\n          <div>\n            <i className=\"fa fa-group\" />\n            {twoInfos.followers}\n          </div>\n          <div>\n            <i className=\"fa fa-user-plus\" />\n            {twoInfos.following}\n          </div>\n          <div>\n            <i className=\"fa fa-code\" />\n            {twoInfos.public_repos}\n          </div>\n        </div>\n      </div>\n      <div className={style[\"result-btn\"]}>\n        <button\n          type=\"button\"\n          onClick={() => {\n            reset();\n          }}\n        >\n          Reset\n        </button>\n      </div>\n    </div>\n  ) : (\n    // <div className={load.loader}>\n    //     <div className={load['loader-inner']}>\n    //       <div className={load['loader-line-wrap']}>\n    //         <div className={load['loader-line']} />\n    //       </div>\n    //       <div className={load['loader-line-wrap']}>\n    //         <div className={load['loader-line']} />\n    //       </div>\n    //       <div className={load['loader-line-wrap']}>\n    //         <div className={load['loader-line']} />\n    //       </div>\n    //       <div className={load['loader-line-wrap']}>\n    //         <div className={load['loader-line']} />\n    //       </div>\n    //       <div className={load['loader-line-wrap']}>\n    //         <div className={load['loader-line']} />\n    //       </div>\n    //     </div>\n    //   </div>\n    <Loading />\n  );\n};\n"],"names":[],"sourceRoot":""}